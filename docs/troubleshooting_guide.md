# دليل حل المشاكل - نظام BroMan للحسابات العقارية

**الإصدار:** 1.0  
**تاريخ الإصدار:** سبتمبر 2025  
**المؤلف:** Manus AI  

---

## جدول المحتويات

1. [المشاكل الشائعة وحلولها](#المشاكل-الشائعة-وحلولها)
2. [مشاكل التثبيت](#مشاكل-التثبيت)
3. [مشاكل تسجيل الدخول](#مشاكل-تسجيل-الدخول)
4. [مشاكل الشبكة والاتصال](#مشاكل-الشبكة-والاتصال)
5. [مشاكل قاعدة البيانات](#مشاكل-قاعدة-البيانات)
6. [مشاكل الأداء](#مشاكل-الأداء)
7. [مشاكل الواجهة والعرض](#مشاكل-الواجهة-والعرض)
8. [رسائل الخطأ الشائعة](#رسائل-الخطأ-الشائعة)
9. [أدوات التشخيص](#أدوات-التشخيص)
10. [الحصول على المساعدة](#الحصول-على-المساعدة)

---

## المشاكل الشائعة وحلولها

### النظام لا يبدأ التشغيل

هذه من أكثر المشاكل شيوعاً التي قد تواجه المستخدمين، خاصة بعد التثبيت الأولي أو بعد إجراء تحديثات على النظام. الأسباب المحتملة متنوعة وتتراوح من مشاكل بسيطة في الإعداد إلى مشاكل أكثر تعقيداً في البيئة التشغيلية.

**الأسباب المحتملة والحلول:**

أولاً، تأكد من أن Python مثبت بشكل صحيح وأن الإصدار المطلوب متاح. يمكن التحقق من ذلك بتشغيل الأمر `python --version` في سطر الأوامر. إذا ظهرت رسالة خطأ أو إصدار أقدم من 3.11، فيجب إعادة تثبيت Python بالإصدار الصحيح.

ثانياً، تأكد من أن جميع المتطلبات مثبتة بشكل صحيح. يمكن إعادة تثبيت المتطلبات بتشغيل الأمر `pip install -r requirements.txt --force-reinstall`. هذا الأمر سيعيد تثبيت جميع المكتبات المطلوبة حتى لو كانت مثبتة مسبقاً.

ثالثاً، تحقق من ملفات الإعداد والتأكد من أنها صحيحة وكاملة. خطأ بسيط في ملف الإعداد يمكن أن يمنع النظام من البدء. راجع جميع المسارات والقيم في ملف `config.py` وتأكد من صحتها.

### النظام يعمل ولكن لا يمكن الوصول إليه من الشبكة

هذه مشكلة شائعة في البيئات التي تحتوي على عدة أجهزة، حيث يعمل النظام على الخادم ولكن الأجهزة الأخرى لا تستطيع الوصول إليه. هذا عادة يكون بسبب إعدادات الشبكة أو جدار الحماية.

**خطوات الحل:**

تأكد من أن النظام يستمع على العنوان الصحيح. في ملف الإعداد، يجب أن يكون العنوان `0.0.0.0` بدلاً من `127.0.0.1` أو `localhost`. العنوان `0.0.0.0` يسمح للنظام بقبول الاتصالات من جميع عناوين الشبكة.

تحقق من إعدادات جدار الحماية على الخادم والتأكد من أنه يسمح بالاتصالات على المنفذ المستخدم (عادة 5000). في Windows، يمكن إضافة استثناء لجدار الحماية من خلال إعدادات الأمان. في Linux، يمكن استخدام أوامر iptables أو ufw لفتح المنفذ.

تأكد من أن جميع الأجهزة متصلة بنفس الشبكة المحلية وأنها يمكنها التواصل مع بعضها البعض. يمكن اختبار ذلك باستخدام أمر ping للتأكد من إمكانية الوصول إلى الخادم من الأجهزة الأخرى.

### بطء في الأداء

بطء الأداء يمكن أن يكون مشكلة مزعجة تؤثر على تجربة المستخدم وإنتاجية العمل. الأسباب متنوعة وتتراوح من مشاكل في الأجهزة إلى مشاكل في الشبكة أو قاعدة البيانات.

**تشخيص وحل مشاكل الأداء:**

أولاً، تحقق من موارد النظام على الخادم. استخدم مدير المهام في Windows أو أوامر مثل `top` أو `htop` في Linux لمراقبة استخدام المعالج والذاكرة. إذا كان الاستخدام عالي، فقد تحتاج لإغلاق برامج أخرى أو ترقية الأجهزة.

ثانياً، تحقق من حجم قاعدة البيانات وعدد السجلات. قواعد البيانات الكبيرة تحتاج وقت أطول للاستعلامات. يمكن تحسين الأداء بحذف البيانات القديمة غير المطلوبة أو أرشفتها في ملفات منفصلة.

ثالثاً، تحقق من جودة الشبكة المحلية. شبكة بطيئة أو غير مستقرة تؤثر على أداء النظام. يمكن اختبار سرعة الشبكة باستخدام أدوات مختلفة والتأكد من أن جميع الكابلات والمعدات تعمل بشكل صحيح.

---

## مشاكل التثبيت

### فشل تثبيت المتطلبات

فشل تثبيت المتطلبات من أكثر المشاكل شيوعاً أثناء عملية التثبيت. هذا يمكن أن يحدث لأسباب مختلفة مثل مشاكل في الاتصال بالإنترنت، عدم توفر صلاحيات كافية، أو تضارب في إصدارات المكتبات.

**الحلول المقترحة:**

إذا كانت المشكلة متعلقة بالاتصال بالإنترنت، تأكد من أن الجهاز متصل بالإنترنت ويمكنه الوصول إلى مستودعات Python (PyPI). يمكن اختبار ذلك بمحاولة تثبيت مكتبة بسيطة مثل `pip install requests`.

في حالة مشاكل الصلاحيات، خاصة في Linux أو Mac، قد تحتاج لاستخدام `sudo` مع أمر التثبيت. ولكن الأفضل هو استخدام البيئة الافتراضية لتجنب مشاكل الصلاحيات. إنشاء البيئة الافتراضية بالأمر `python -m venv broman_env` وتفعيلها قبل تثبيت المتطلبات.

إذا كانت هناك مشاكل في إصدارات المكتبات، يمكن محاولة تثبيت المتطلبات واحدة تلو الأخرى لتحديد المكتبة التي تسبب المشكلة. بعد تحديد المكتبة المشكلة، يمكن البحث عن حلول محددة لها أو استخدام إصدار مختلف.

### مشاكل في إنشاء قاعدة البيانات

أحياناً قد تفشل عملية إنشاء قاعدة البيانات الأولية، مما يمنع النظام من العمل بشكل صحيح. هذا يمكن أن يحدث بسبب مشاكل في الصلاحيات، أو وجود ملف قاعدة بيانات تالف، أو مشاكل في سكريبت الإنشاء.

**خطوات الحل:**

أولاً، تأكد من أن المجلد الذي سيحتوي على قاعدة البيانات قابل للكتابة. في بعض الأحيان، قيود الصلاحيات تمنع إنشاء ملفات جديدة. يمكن تغيير صلاحيات المجلد أو تغيير مكان قاعدة البيانات في ملف الإعداد.

ثانياً، إذا كان هناك ملف قاعدة بيانات موجود مسبقاً وتالف، احذفه وأعد تشغيل سكريبت الإنشاء. ملف قاعدة البيانات عادة يسمى `broman.db` ويوجد في مجلد النظام أو المكان المحدد في ملف الإعداد.

ثالثاً، تحقق من سكريبت إنشاء قاعدة البيانات والتأكد من أنه كامل وغير تالف. يمكن مقارنة السكريبت مع النسخة الأصلية من المستودع للتأكد من عدم وجود تغييرات غير مرغوبة.

### مشاكل في ملفات الإعداد

ملفات الإعداد مهمة جداً لعمل النظام بشكل صحيح، وأي خطأ فيها يمكن أن يمنع النظام من البدء أو يسبب مشاكل في الوظائف. الأخطاء الشائعة تشمل أخطاء في بناء الجملة، قيم خاطئة، أو مسارات غير صحيحة.

**تشخيص وإصلاح مشاكل الإعداد:**

راجع ملف `config.py` بعناية وتأكد من أن جميع القيم صحيحة ومناسبة للبيئة المحلية. انتبه خاصة للمسارات والتأكد من أنها تشير إلى مواقع صحيحة وموجودة. في Windows، تأكد من استخدام الشرطة المائلة الصحيحة في المسارات أو استخدام raw strings.

تحقق من مفتاح التشفير (SECRET_KEY) والتأكد من أنه نص صالح وليس فارغ. هذا المفتاح مهم جداً لأمان النظام ويجب أن يكون معقد وفريد. إذا كنت غير متأكد من القيمة، يمكن إنتاج مفتاح جديد باستخدام أدوات مختلفة.

في حالة وجود أخطاء في بناء الجملة، ستظهر رسائل خطأ واضحة عند محاولة تشغيل النظام. اقرأ هذه الرسائل بعناية لتحديد مكان الخطأ بالضبط. أخطاء بناء الجملة الشائعة تشمل نسيان علامات الاقتباس، أو الفواصل، أو الأقواس.

---

## مشاكل تسجيل الدخول

### نسيان كلمة المرور

نسيان كلمة مرور المستخدم الإداري مشكلة خطيرة يمكن أن تمنع الوصول إلى النظام بالكامل. لحسن الحظ، هناك عدة طرق لحل هذه المشكلة واستعادة الوصول إلى النظام.

**الحلول المتاحة:**

الحل الأسهل هو استخدام سكريبت إعادة تعيين كلمة المرور المرفق مع النظام. هذا السكريبت يسمح بتغيير كلمة مرور أي مستخدم مباشرة في قاعدة البيانات دون الحاجة لتسجيل الدخول. شغل السكريبت باستخدام الأمر `python reset_password.py` واتبع التعليمات.

إذا لم يكن السكريبت متاحاً، يمكن إعادة إنشاء قاعدة البيانات بالكامل، ولكن هذا سيؤدي إلى فقدان جميع البيانات الموجودة. لذلك، هذا الحل يُستخدم فقط كملاذ أخير وبعد التأكد من وجود نسخة احتياطية للبيانات المهمة.

حل آخر هو تعديل قاعدة البيانات مباشرة باستخدام أدوات إدارة SQLite. هذا يتطلب معرفة تقنية أكثر، ولكنه يسمح بتغيير كلمة المرور دون فقدان البيانات. يمكن استخدام أدوات مثل DB Browser for SQLite لفتح قاعدة البيانات وتعديل جدول المستخدمين.

### مشاكل في تسجيل الدخول رغم صحة البيانات

أحياناً قد يواجه المستخدمون مشاكل في تسجيل الدخول حتى مع إدخال البيانات الصحيحة. هذا يمكن أن يحدث لأسباب مختلفة مثل مشاكل في الجلسات، أو ملفات تعريف الارتباط، أو إعدادات المتصفح.

**خطوات الحل:**

أولاً، تأكد من أن البيانات المدخلة صحيحة تماماً، بما في ذلك حالة الأحرف (كبيرة أو صغيرة). اسماء المستخدمين وكلمات المرور حساسة لحالة الأحرف، لذلك "Admin" مختلف عن "admin".

ثانياً، امسح ملفات تعريف الارتباط (cookies) والبيانات المؤقتة للموقع في المتصفح. هذه الملفات أحياناً تحتوي على معلومات قديمة أو تالفة تمنع تسجيل الدخول الصحيح. يمكن مسح هذه البيانات من إعدادات المتصفح.

ثالثاً، جرب استخدام متصفح مختلف أو نافذة تصفح خاصة (incognito/private). هذا يساعد في تحديد ما إذا كانت المشكلة متعلقة بإعدادات المتصفح أو امتدادات معينة.

### انتهاء صلاحية الجلسة بسرعة

إذا كانت جلسة المستخدم تنتهي بسرعة ويحتاج لإعادة تسجيل الدخول بشكل متكرر، فهذا يمكن أن يكون مزعج ويؤثر على الإنتاجية. هذا عادة يحدث بسبب إعدادات الجلسة في النظام أو مشاكل في ملفات تعريف الارتباط.

**الحلول:**

تحقق من إعدادات مدة الجلسة في ملف الإعداد وزيادتها إذا لزم الأمر. القيمة الافتراضية عادة مناسبة، ولكن يمكن زيادتها للمستخدمين الذين يعملون لفترات طويلة دون انقطاع.

تأكد من أن المتصفح يقبل ملفات تعريف الارتباط من النظام. بعض إعدادات الأمان الصارمة في المتصفح تمنع حفظ هذه الملفات، مما يؤدي إلى انتهاء الجلسة بسرعة.

في البيئات التي تستخدم عدة خوادم أو موازنات التحميل، تأكد من أن الجلسات محفوظة بطريقة تسمح بالوصول إليها من جميع الخوادم. هذا موضوع متقدم وقد يحتاج مساعدة تقنية متخصصة.

---

## مشاكل الشبكة والاتصال

### انقطاع الاتصال المتكرر

انقطاع الاتصال بين أجهزة العملاء والخادم مشكلة شائعة في البيئات التي تعتمد على الشبكات اللاسلكية أو الشبكات غير المستقرة. هذا يؤثر على تجربة المستخدم ويمكن أن يؤدي إلى فقدان البيانات غير المحفوظة.

**تشخيص المشكلة:**

استخدم أدوات مراقبة الشبكة لتحديد مصدر المشكلة. أمر `ping` يمكن أن يساعد في تحديد ما إذا كانت المشكلة في الاتصال الأساسي بين الأجهزة. شغل الأمر `ping [عنوان_IP_للخادم]` من جهاز العميل ولاحظ ما إذا كانت هناك حزم مفقودة أو تأخير عالي.

تحقق من جودة الإشارة اللاسلكية إذا كنت تستخدم Wi-Fi. الإشارة الضعيفة أو التداخل من أجهزة أخرى يمكن أن يسبب انقطاع متكرر. حاول الاقتراب من نقطة الوصول اللاسلكية أو استخدام كابل شبكة مباشر للاختبار.

راجع إعدادات موفر الطاقة للشبكة في أجهزة العملاء. بعض الأجهزة تقوم بإيقاف محول الشبكة لتوفير الطاقة، مما يسبب انقطاع في الاتصال. يمكن تعطيل هذه الميزة من إعدادات الجهاز.

### بطء في تحميل الصفحات

بطء تحميل الصفحات يؤثر على تجربة المستخدم ويقلل من الإنتاجية. الأسباب متنوعة وتشمل مشاكل في الشبكة، الخادم، أو حتى المتصفح المستخدم.

**خطوات التشخيص والحل:**

قس سرعة الشبكة بين أجهزة العملاء والخادم باستخدام أدوات مختلفة. يمكن استخدام أوامر مثل `iperf` لقياس سرعة النقل الفعلية، أو أدوات أبسط مثل نسخ ملف كبير ومراقبة الوقت المطلوب.

تحقق من استخدام الموارد على الخادم أثناء تحميل الصفحات. استخدام عالي للمعالج أو الذاكرة يمكن أن يبطئ الاستجابة. إذا كان الاستخدام عالي، حاول إغلاق برامج أخرى أو ترقية الأجهزة.

امسح ذاكرة التخزين المؤقت في المتصفح وأعد تشغيله. أحياناً الملفات المؤقتة التالفة أو القديمة تبطئ تحميل الصفحات. كما يمكن تجربة متصفح مختلف للمقارنة.

### مشاكل في الوصول من أجهزة معينة

أحياناً قد تواجه مشاكل في الوصول إلى النظام من أجهزة معينة بينما تعمل الأجهزة الأخرى بشكل طبيعي. هذا عادة يشير إلى مشكلة محددة في الجهاز المتأثر أو إعداداته.

**التشخيص والحل:**

قارن إعدادات الشبكة بين الجهاز المتأثر والأجهزة التي تعمل بشكل طبيعي. تأكد من أن عنوان IP، قناع الشبكة الفرعية، والبوابة الافتراضية متطابقة أو مناسبة للشبكة المستخدمة.

تحقق من إعدادات جدار الحماية والبرامج الأمنية على الجهاز المتأثر. بعض البرامج الأمنية تحجب الاتصالات بالخوادم المحلية كإجراء احترازي. يمكن إضافة استثناء للنظام أو تعطيل الحماية مؤقتاً للاختبار.

جرب الوصول إلى النظام من الجهاز المتأثر باستخدام عنوان IP مختلف أو متصفح مختلف. هذا يساعد في تحديد ما إذا كانت المشكلة في الشبكة، المتصفح، أو إعدادات النظام.

---

## مشاكل قاعدة البيانات

### تلف ملف قاعدة البيانات

تلف ملف قاعدة البيانات مشكلة خطيرة يمكن أن تؤدي إلى فقدان البيانات أو عدم قدرة النظام على العمل. هذا يمكن أن يحدث بسبب انقطاع الكهرباء المفاجئ، مشاكل في القرص الصلب، أو أخطاء في البرمجيات.

**علامات تلف قاعدة البيانات:**

رسائل خطأ عند محاولة الوصول إلى البيانات، بطء شديد في الاستعلامات، أو فشل النظام في البدء مع رسائل خطأ تشير إلى مشاكل في قاعدة البيانات. في بعض الحالات، قد تظهر بيانات غير صحيحة أو مفقودة.

**خطوات الإصلاح:**

أولاً، توقف عن استخدام النظام فوراً لمنع المزيد من التلف. انسخ ملف قاعدة البيانات إلى مكان آمن قبل محاولة أي إصلاحات، حتى لو كان تالفاً، فقد يكون من الممكن استرداد بعض البيانات منه لاحقاً.

استخدم أدوات إصلاح SQLite المتاحة مثل `.recover` command في SQLite CLI، أو أدوات الطرف الثالث المتخصصة في إصلاح قواعد بيانات SQLite. هذه الأدوات يمكنها أحياناً استرداد البيانات من الملفات التالفة جزئياً.

إذا فشلت محاولات الإصلاح، استعد أحدث نسخة احتياطية متاحة. هذا هو السبب في أهمية إجراء نسخ احتياطية منتظمة. بعد الاستعادة، ستحتاج لإعادة إدخال أي بيانات تم إضافتها بعد تاريخ النسخة الاحتياطية.

### مشاكل في الأداء مع نمو البيانات

مع مرور الوقت ونمو كمية البيانات في النظام، قد تلاحظ بطء في الأداء، خاصة في العمليات التي تتطلب البحث في كميات كبيرة من البيانات. هذا طبيعي إلى حد ما، ولكن يمكن تحسينه بعدة طرق.

**استراتيجيات التحسين:**

قم بتشغيل أمر VACUUM على قاعدة البيانات بشكل دوري لإعادة تنظيم البيانات وتحسين الأداء. هذا الأمر يزيل المساحات الفارغة ويعيد ترتيب البيانات بطريقة أكثر كفاءة. يمكن تشغيل هذا الأمر من خلال أدوات إدارة SQLite.

فكر في أرشفة البيانات القديمة التي لا تحتاجها بشكل يومي. يمكن نقل المعاملات القديمة (مثل تلك الأقدم من سنة) إلى قاعدة بيانات منفصلة أو ملفات أرشيف، مما يقلل من حجم قاعدة البيانات الرئيسية ويحسن الأداء.

راجع الاستعلامات المستخدمة في النظام وتأكد من أنها محسنة بشكل جيد. الاستعلامات المعقدة أو غير المحسنة يمكن أن تبطئ النظام بشكل كبير. إذا كنت تواجه مشاكل أداء خطيرة، قد تحتاج لمساعدة تقنية متخصصة لتحسين الاستعلامات.

### مشاكل في النسخ الاحتياطي

النسخ الاحتياطية ضرورية لحماية البيانات، ولكن أحياناً قد تواجه مشاكل في إنشائها أو استعادتها. هذه المشاكل يمكن أن تترك النظام عرضة لفقدان البيانات في حالة حدوث مشاكل.

**مشاكل شائعة وحلولها:**

إذا كانت النسخة الاحتياطية تفشل بسبب مشاكل في الصلاحيات، تأكد من أن المستخدم الذي يشغل عملية النسخ الاحتياطي له صلاحيات قراءة ملف قاعدة البيانات وكتابة في المجلد المخصص للنسخ الاحتياطية.

إذا كانت النسخ الاحتياطية كبيرة الحجم وتستغرق وقت طويل، فكر في استخدام النسخ الاحتياطية التدريجية (incremental backups) التي تنسخ فقط التغييرات منذ آخر نسخة احتياطية. هذا يوفر الوقت والمساحة.

اختبر النسخ الاحتياطية بشكل دوري بمحاولة استعادتها في بيئة اختبار. نسخة احتياطية لا يمكن استعادتها لا قيمة لها. الاختبار الدوري يضمن أن النسخ الاحتياطية سليمة ويمكن الاعتماد عليها عند الحاجة.

---

